# 在庫管理システム

## 概要
本システムは、在庫商品を管理するためのWebアプリケーションです。

## 1. 要件定義

### 1.1 目的
ユーザーがログイン後、在庫商品を管理できるように、操作しやすくレスポンシブなWeb UIを提供する。
Ajaxによる応答性の高い検索と合計計算、CSV エクスポートをサポートすることで業務効率を高める。

### 1.2 システム概要
- 在庫商品を管理するWebアプリケーション
- ユーザー認証（ログイン）機能あり
- 商品の登録、編集（Ajaxによる合計算出）、削除、一覧表示（ページング）が可能
- 商品のAjax検索機能あり
- 商品データのCSVエクスポート機能あり

### 1.3 機能要件
1. 在庫商品管理機能
   - 在庫商品の新規登録（登録画面で数量・単価変更時にAjaxで合計金額表示）
   - 在庫商品情報の編集（編集画面で数量・単価変更時にAjaxで合計金額表示）
   - 在庫商品の削除（削除確認画面）
   - 在庫商品一覧の表示（1ページあたり10件、前後ボタン、現在ページ表示）
   - 在庫商品の検索機能（Ajax による非同期検索、商品名の部分一致）
   - 在庫商品データのCSVエクスポート（UTF-8、カンマ区切り、ダブルクオートのエスケープ）

2. 認証
   - ログイン画面あり
   - ログイン完了後に在庫商品一覧ページへ遷移
   - 在庫商品一覧画面にログアウトボタン（押下でログイン画面へ遷移）
     
3. 商品データ項目
   - ID（自動採番）
   - 商品名（必須）
   - 数量（0以上の整数）
   - 単価（1円以上の整数）
   - 合計金額（数量×単価の自動計算）

### 1.3 非機能要件
- レスポンシブデザイン対応
- PostgreSQLデータベースを使用

## 2. 基本設計

### 2.1 システム構成
- フロントエンド: HTML, CSS (Bootstrap), JavaScript
- バックエンド: Java17 (Spring Boot)
- データベース: PostgreSQL17.6
- 開発環境: Eclipse

### 2.2 データベース設計

#### products テーブル
| カラム名 | データ型 | 説明 |
|----------|----------|------|
| id | int | 主キー |
| name | string | 商品名 |
| quantity | int | 在庫数 |
| unitPrice | int | 単価 |

### 2.3 画面設計
#### 商品一覧画面
*   商品の一覧表示（ページング付き）
*   検索ボックス
*   新規登録ボタン
*   CSVエクスポートボタン
*   各商品の編集/詳細/削除ボタン

#### 商品登録/編集画面
*   商品名入力フィールド
*   数量入力フィールド
*   単価入力フィールド
*   保存/キャンセルボタン

#### 商品詳細画面
*   商品情報の表示
*   戻るボタン

#### 削除確認画面
*   削除確認メッセージ
*   削除/キャンセルボタン

### 2.4  アーキテクチャ
- プレゼンテーション層: Thymeleafテンプレート + Bootstrap 5 + JavaScript
- コントローラ層: Spring MVC (Controller)
- ビジネス層: Service（ProductService）
- 永続化層: Spring Data JPA（ProductRepository）
- セキュリティ: Spring Security（フォームログイン）
- DB: PostgreSQL 17.6
- ビルド: Gradle（build.gradle）

## 3. 詳細設計

### 3.1 ルーティング一覧
#### 商品管理
- GET /products - 商品一覧画面取得 
- GET /products/create - 商品登録画面取得 
- POST /products/create - 商品登録 
- GET /products/details/{id} - 商品詳細画面取得
- GET /products/edit/{id} - 商品編集画面取得 
- PUT /products/edit/{id} - 商品更新 
- GET /products/delete/{id} - 商品削除確認画面取得 
- DELETE /products/delete/{id} - 商品削除
- GET  /products/export        - CSV エクスポート

#### 認証関連:
- GET  /login                     - ログイン画面取得
- POST /login                     - ログイン
- GET  /register                  - ユーザー登録画面取得
- POST /register                  - ユーザー登録
- POST /logout                    - ログアウト

### 3.2 主要機能の実装詳細
#### 検索機能
*   Ajax通信による非同期検索
*   部分一致での商品名検索

#### ページング機能
*   1ページあたり10件表示
*   前後ページへの移動ボタン
*   現在のページ番号表示

#### CSVエクスポート
*   UTF-8エンコーディング
*   カンマ区切りフォーマット
*   ダブルクオート特殊文字のエスケープ処理
*   

## 4. 開発環境
- Java 17
- Gradle
- PostgreSQL 17.6
- ブラウザ（Bootstrap 5 対応）
- 開発環境：Eclipse
- Git/GitHub

